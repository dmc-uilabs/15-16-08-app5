import psycopg2, re, urllib, datetime
connection_status=''
urlcmt=''
DOME='N'
#read the file
inputfile=open('input','r')
inputdict={}
inputlines=inputfile.readlines()
for x in inputlines:
    x=x.strip('\n')
    a=x.split(' = ')
    inputdict[a[0]]=a[1]
constant1='start'
try:

    #connect to the AWS RDS postgres instance
    conn=psycopg2.connect("host='testrun.cnw4f0shy3qa.us-east-1.rds.amazonaws.com' port=5432 dbname='testrun' user='testuser' password='helloworld'")
    cur=conn.cursor()
    connection_status="Connected1"
    #connect to NCSU RedHat system's postgres instance
    conn2="host='"+str(inputdict['ipaddress_in'])+"' port="+str(inputdict['port_in'])+" dbname='"+str(inputdict['dbname_in'])+"' user='"+str(inputdict['username_in'])+"' password='"+str(inputdict['password_in'])+"'"
    con2=psycopg2.connect(conn)
    cur2=con2.cursor()
    connection_status="Connected2"

        
    if connection_status=='Connected2':
        setupsheet=str(inputdict['setupsheet_in'])
        material=str(inputdict['material_in'])
        #check validity of the url link
        try:
            urlcheck=urllib.urlopen(setupsheet)
            urlcmt='url is valid'
        except:
            with open('output.out', 'w') as f:
                f.write("""outputTemplate = <!DOCTYPE html> <html>   <head>     <title>Home</title>     <link href="https://s3.amazonaws.com/dmdiidome3/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/axure_rp_page.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/stylesd.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/styles.css" type="text/css" rel="stylesheet"/>   </head>   <body>     <div id="base" class="">        <!-- Unnamed (Image) -->       <div id="u0" class="ax_default image">         <img id="u0_img" class="img " src="https://s3.amazonaws.com/dmdiidome3/u0.jpg"/>         <!-- Unnamed () -->         <div id="u1" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u2" class="ax_default box_1">         <div id="u2_div" class=""></div>         <!-- Unnamed () -->         <div id="u3" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u4" class="ax_default heading_3">         <div id="u4_div" class=""></div>         <!-- Unnamed () -->         <div id="u5" class="text">           <p><span>DIME Laboratory: Part-Machine Specifications Verification</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u6" class="ax_default box_2">         <div id="u6_div" class=""></div>         <!-- Unnamed () -->         <div id="u7" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u8" class="ax_default text_field">         <input id="ipaddress_out" type="text" placeholder="{{ipaddress_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u9" class="ax_default label">         <div id="u9_div" class=""></div>         <!-- Unnamed () -->         <div id="u10" class="text">           <p><span>IP Address</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u11" class="ax_default label">         <div id="u11_div" class=""></div>         <!-- Unnamed () -->         <div id="u12" class="text">           <p><span>Port</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u13" class="ax_default label">         <div id="u13_div" class=""></div>         <!-- Unnamed () -->         <div id="u14" class="text">           <p><span>Database Name</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u15" class="ax_default text_field">         <input id="port_out" type="text" placeholder="{{port_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u16" class="ax_default text_field">         <input id="dbname_out" type="text" placeholder="{{dbname_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u17" class="ax_default box_2">         <div id="u17_div" class=""></div>         <!-- Unnamed () -->         <div id="u18" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u19" class="ax_default label">         <div id="u19_div" class=""></div>         <!-- Unnamed () -->         <div id="u20" class="text">           <p><span>Setup Sheet</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u21" class="ax_default label">         <div id="u21_div" class=""></div>         <!-- Unnamed () -->         <div id="u22" class="text">           <p><span>Material</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u23" class="ax_default text_field">         <input id="material_out" type="text" placeholder="{{material_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u24" class="ax_default text_field">         <input id="setupsheet_out" type="text" placeholder="{{setupsheet_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u25" class="ax_default label">         <div id="u25_div" class=""></div>         <!-- Unnamed () -->         <div id="u26" class="text">           <p><span>Status</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u27" class="ax_default label">         <div id="u27_div" class=""></div>         <!-- Unnamed () -->         <div id="u28" class="text">           <p><span>Machine Capability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u29" class="ax_default label">         <div id="u29_div" class=""></div>         <!-- Unnamed () -->         <div id="u30" class="text">           <p><span>Machine Availability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u31" class="ax_default label">         <div id="u31_div" class=""></div>         <!-- Unnamed () -->         <div id="u32" class="text">           <p><span>Feedback</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u33" class="ax_default text_field">         <input id="status_out" type="text" placeholder="{{status_out}}"/>       </div>        <!-- Unnamed (Text Area) -->       <div id="u34" class="ax_default text_area">         <textarea id="machine_capability_out" type="text" placeholder="{{machine_capability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u35" class="ax_default text_area">         <textarea id="machine_availability_out" type="text" placeholder="{{machine_availability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u36" class="ax_default text_area">         <textarea id="feedback_out" type="text" placeholder="{{feedback_out}}"></textarea>       </div>     </div>   </body> </html>""")
                f.write("\n")
                f.write("ipaddress_out = "+str(inputdict['ipaddress_in'])+"\n")
                f.write("port_out = "+str(inputdict['port_in'])+"\n")
                f.write("dbname_out = "+str(inputdict['dbname_in'])+"\n")
                f.write("setupsheet_out = "+str(inputdict['setupsheet_in'])+"\n")
                f.write("material_out = "+str(inputdict['material_in'])+"\n")
                f.write("status_out = Error\n" )
                f.write("machine_capability_out = NA\n" )
                f.write("machine_availability_out = NA\n")
                f.write("feedback_out = The setup sheet url link given can not be accessed. Kindly check if the url is valid and if the url access rights are given.")
        #get status from the AWS_RDS database
        cur.execute("SELECT * FROM dime_sks_log order by timestamp desc;")
        status_prev=cur.fetchall()
        
        if status_prev[0][1]!='AWS':
            with open('output.out', 'w') as f:
                f.write("""outputTemplate = <!DOCTYPE html> <html>   <head>     <title>Home</title>     <link href="https://s3.amazonaws.com/dmdiidome3/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/axure_rp_page.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/stylesd.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/styles.css" type="text/css" rel="stylesheet"/>   </head>   <body>     <div id="base" class="">        <!-- Unnamed (Image) -->       <div id="u0" class="ax_default image">         <img id="u0_img" class="img " src="https://s3.amazonaws.com/dmdiidome3/u0.jpg"/>         <!-- Unnamed () -->         <div id="u1" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u2" class="ax_default box_1">         <div id="u2_div" class=""></div>         <!-- Unnamed () -->         <div id="u3" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u4" class="ax_default heading_3">         <div id="u4_div" class=""></div>         <!-- Unnamed () -->         <div id="u5" class="text">           <p><span>DIME Laboratory: Part-Machine Specifications Verification</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u6" class="ax_default box_2">         <div id="u6_div" class=""></div>         <!-- Unnamed () -->         <div id="u7" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u8" class="ax_default text_field">         <input id="ipaddress_out" type="text" placeholder="{{ipaddress_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u9" class="ax_default label">         <div id="u9_div" class=""></div>         <!-- Unnamed () -->         <div id="u10" class="text">           <p><span>IP Address</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u11" class="ax_default label">         <div id="u11_div" class=""></div>         <!-- Unnamed () -->         <div id="u12" class="text">           <p><span>Port</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u13" class="ax_default label">         <div id="u13_div" class=""></div>         <!-- Unnamed () -->         <div id="u14" class="text">           <p><span>Database Name</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u15" class="ax_default text_field">         <input id="port_out" type="text" placeholder="{{port_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u16" class="ax_default text_field">         <input id="dbname_out" type="text" placeholder="{{dbname_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u17" class="ax_default box_2">         <div id="u17_div" class=""></div>         <!-- Unnamed () -->         <div id="u18" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u19" class="ax_default label">         <div id="u19_div" class=""></div>         <!-- Unnamed () -->         <div id="u20" class="text">           <p><span>Setup Sheet</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u21" class="ax_default label">         <div id="u21_div" class=""></div>         <!-- Unnamed () -->         <div id="u22" class="text">           <p><span>Material</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u23" class="ax_default text_field">         <input id="material_out" type="text" placeholder="{{material_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u24" class="ax_default text_field">         <input id="setupsheet_out" type="text" placeholder="{{setupsheet_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u25" class="ax_default label">         <div id="u25_div" class=""></div>         <!-- Unnamed () -->         <div id="u26" class="text">           <p><span>Status</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u27" class="ax_default label">         <div id="u27_div" class=""></div>         <!-- Unnamed () -->         <div id="u28" class="text">           <p><span>Machine Capability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u29" class="ax_default label">         <div id="u29_div" class=""></div>         <!-- Unnamed () -->         <div id="u30" class="text">           <p><span>Machine Availability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u31" class="ax_default label">         <div id="u31_div" class=""></div>         <!-- Unnamed () -->         <div id="u32" class="text">           <p><span>Feedback</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u33" class="ax_default text_field">         <input id="status_out" type="text" placeholder="{{status_out}}"/>       </div>        <!-- Unnamed (Text Area) -->       <div id="u34" class="ax_default text_area">         <textarea id="machine_capability_out" type="text" placeholder="{{machine_capability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u35" class="ax_default text_area">         <textarea id="machine_availability_out" type="text" placeholder="{{machine_availability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u36" class="ax_default text_area">         <textarea id="feedback_out" type="text" placeholder="{{feedback_out}}"></textarea>       </div>     </div>   </body> </html>""")
                f.write("\n")
                f.write("ipaddress_out = "+str(inputdict['ipaddress_in'])+"\n")
                f.write("port_out = "+str(inputdict['port_in'])+"\n")
                f.write("dbname_out = "+str(inputdict['dbname_in'])+"\n")
                f.write("setupsheet_out = "+str(inputdict['setupsheet_in'])+"\n")
                f.write("material_out = "+str(inputdict['material_in'])+"\n")
                f.write("status_out = Error\n" )
                f.write("machine_capability_out = NA\n" )
                f.write("machine_availability_out = NA\n")
                f.write("feedback_out = Another dime_sks DOME application is active. Kindly try again.")
            DOME='Y'
            
        if urlcmt=='url is valid' and DOME=='N':
            #material check 
            cur.execute("SELECT name from materials;")
            mat_list=cur.fetchall()
            matcheck='N'
            for x in mat_list:
                if material in x[0]:
                    matcheck='Y'
                    break
            if matcheck=='N':
                with open('output.out', 'w') as f:
                    f.write("""outputTemplate = <!DOCTYPE html> <html>   <head>     <title>Home</title>     <link href="https://s3.amazonaws.com/dmdiidome3/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/axure_rp_page.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/stylesd.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/styles.css" type="text/css" rel="stylesheet"/>   </head>   <body>     <div id="base" class="">        <!-- Unnamed (Image) -->       <div id="u0" class="ax_default image">         <img id="u0_img" class="img " src="https://s3.amazonaws.com/dmdiidome3/u0.jpg"/>         <!-- Unnamed () -->         <div id="u1" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u2" class="ax_default box_1">         <div id="u2_div" class=""></div>         <!-- Unnamed () -->         <div id="u3" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u4" class="ax_default heading_3">         <div id="u4_div" class=""></div>         <!-- Unnamed () -->         <div id="u5" class="text">           <p><span>DIME Laboratory: Part-Machine Specifications Verification</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u6" class="ax_default box_2">         <div id="u6_div" class=""></div>         <!-- Unnamed () -->         <div id="u7" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u8" class="ax_default text_field">         <input id="ipaddress_out" type="text" placeholder="{{ipaddress_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u9" class="ax_default label">         <div id="u9_div" class=""></div>         <!-- Unnamed () -->         <div id="u10" class="text">           <p><span>IP Address</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u11" class="ax_default label">         <div id="u11_div" class=""></div>         <!-- Unnamed () -->         <div id="u12" class="text">           <p><span>Port</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u13" class="ax_default label">         <div id="u13_div" class=""></div>         <!-- Unnamed () -->         <div id="u14" class="text">           <p><span>Database Name</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u15" class="ax_default text_field">         <input id="port_out" type="text" placeholder="{{port_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u16" class="ax_default text_field">         <input id="dbname_out" type="text" placeholder="{{dbname_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u17" class="ax_default box_2">         <div id="u17_div" class=""></div>         <!-- Unnamed () -->         <div id="u18" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u19" class="ax_default label">         <div id="u19_div" class=""></div>         <!-- Unnamed () -->         <div id="u20" class="text">           <p><span>Setup Sheet</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u21" class="ax_default label">         <div id="u21_div" class=""></div>         <!-- Unnamed () -->         <div id="u22" class="text">           <p><span>Material</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u23" class="ax_default text_field">         <input id="material_out" type="text" placeholder="{{material_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u24" class="ax_default text_field">         <input id="setupsheet_out" type="text" placeholder="{{setupsheet_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u25" class="ax_default label">         <div id="u25_div" class=""></div>         <!-- Unnamed () -->         <div id="u26" class="text">           <p><span>Status</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u27" class="ax_default label">         <div id="u27_div" class=""></div>         <!-- Unnamed () -->         <div id="u28" class="text">           <p><span>Machine Capability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u29" class="ax_default label">         <div id="u29_div" class=""></div>         <!-- Unnamed () -->         <div id="u30" class="text">           <p><span>Machine Availability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u31" class="ax_default label">         <div id="u31_div" class=""></div>         <!-- Unnamed () -->         <div id="u32" class="text">           <p><span>Feedback</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u33" class="ax_default text_field">         <input id="status_out" type="text" placeholder="{{status_out}}"/>       </div>        <!-- Unnamed (Text Area) -->       <div id="u34" class="ax_default text_area">         <textarea id="machine_capability_out" type="text" placeholder="{{machine_capability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u35" class="ax_default text_area">         <textarea id="machine_availability_out" type="text" placeholder="{{machine_availability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u36" class="ax_default text_area">         <textarea id="feedback_out" type="text" placeholder="{{feedback_out}}"></textarea>       </div>     </div>   </body> </html>""")
                    f.write("\n")
                    f.write("ipaddress_out = "+str(inputdict['ipaddress_in'])+"\n")
                    f.write("port_out = "+str(inputdict['port_in'])+"\n")
                    f.write("dbname_out = "+str(inputdict['dbname_in'])+"\n")
                    f.write("setupsheet_out = "+str(inputdict['setupsheet_in'])+"\n")
                    f.write("material_out = "+str(inputdict['material_in'])+"\n")
                    f.write("status_out = Error\n" )
                    f.write("machine_capability_out = NA\n" )
                    f.write("machine_availability_out = NA\n")
                    f.write("feedback_out = Material not found in the database. Kindly check the spelling or update the database.")
    
            #sending in input to the AWS-RDS
            if matcheck=='Y':
                cur.execute("INSERT INTO dime_sks_log (timestamp, status, setupsheet, material) VALUES (%s,'DOME',%s,%s);",(datetime.datetime.now().isoformat(),setupsheet,material))
                conn.commit()
                
            cur.execute("SELECT * FROM dime_sks_log order by timestamp desc;")
            status_new=cur.fetchall()
            conn.commit()
            
            while status_new[0][1]!='AWS':
                cur.execute("SELECT * FROM dime_sks_log order by timestamp desc;")
                status_new=cur.fetchall()
    
               
            if status_new[0][1]=='AWS':
                if len(status_new[0][5])<=5:
                    avail='NA'
                else:
                    avail=status_new[0][5]
                if len(status_new[0][6])<=5:
                    feed='No feedbacks.'
                else:
                    feed=status_new[0][6]


                with open('output.out', 'w') as f:
                    f.write("""outputTemplate = <!DOCTYPE html> <html>   <head>     <title>Home</title>     <link href="https://s3.amazonaws.com/dmdiidome3/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/axure_rp_page.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/stylesd.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/styles.css" type="text/css" rel="stylesheet"/>   </head>   <body>     <div id="base" class="">        <!-- Unnamed (Image) -->       <div id="u0" class="ax_default image">         <img id="u0_img" class="img " src="https://s3.amazonaws.com/dmdiidome3/u0.jpg"/>         <!-- Unnamed () -->         <div id="u1" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u2" class="ax_default box_1">         <div id="u2_div" class=""></div>         <!-- Unnamed () -->         <div id="u3" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u4" class="ax_default heading_3">         <div id="u4_div" class=""></div>         <!-- Unnamed () -->         <div id="u5" class="text">           <p><span>DIME Laboratory: Part-Machine Specifications Verification</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u6" class="ax_default box_2">         <div id="u6_div" class=""></div>         <!-- Unnamed () -->         <div id="u7" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u8" class="ax_default text_field">         <input id="ipaddress_out" type="text" placeholder="{{ipaddress_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u9" class="ax_default label">         <div id="u9_div" class=""></div>         <!-- Unnamed () -->         <div id="u10" class="text">           <p><span>IP Address</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u11" class="ax_default label">         <div id="u11_div" class=""></div>         <!-- Unnamed () -->         <div id="u12" class="text">           <p><span>Port</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u13" class="ax_default label">         <div id="u13_div" class=""></div>         <!-- Unnamed () -->         <div id="u14" class="text">           <p><span>Database Name</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u15" class="ax_default text_field">         <input id="port_out" type="text" placeholder="{{port_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u16" class="ax_default text_field">         <input id="dbname_out" type="text" placeholder="{{dbname_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u17" class="ax_default box_2">         <div id="u17_div" class=""></div>         <!-- Unnamed () -->         <div id="u18" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u19" class="ax_default label">         <div id="u19_div" class=""></div>         <!-- Unnamed () -->         <div id="u20" class="text">           <p><span>Setup Sheet</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u21" class="ax_default label">         <div id="u21_div" class=""></div>         <!-- Unnamed () -->         <div id="u22" class="text">           <p><span>Material</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u23" class="ax_default text_field">         <input id="material_out" type="text" placeholder="{{material_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u24" class="ax_default text_field">         <input id="setupsheet_out" type="text" placeholder="{{setupsheet_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u25" class="ax_default label">         <div id="u25_div" class=""></div>         <!-- Unnamed () -->         <div id="u26" class="text">           <p><span>Status</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u27" class="ax_default label">         <div id="u27_div" class=""></div>         <!-- Unnamed () -->         <div id="u28" class="text">           <p><span>Machine Capability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u29" class="ax_default label">         <div id="u29_div" class=""></div>         <!-- Unnamed () -->         <div id="u30" class="text">           <p><span>Machine Availability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u31" class="ax_default label">         <div id="u31_div" class=""></div>         <!-- Unnamed () -->         <div id="u32" class="text">           <p><span>Feedback</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u33" class="ax_default text_field">         <input id="status_out" type="text" placeholder="{{status_out}}"/>       </div>        <!-- Unnamed (Text Area) -->       <div id="u34" class="ax_default text_area">         <textarea id="machine_capability_out" type="text" placeholder="{{machine_capability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u35" class="ax_default text_area">         <textarea id="machine_availability_out" type="text" placeholder="{{machine_availability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u36" class="ax_default text_area">         <textarea id="feedback_out" type="text" placeholder="{{feedback_out}}"></textarea>       </div>     </div>   </body> </html>""")
                    f.write("\n")
                    f.write("ipaddress_out = "+str(inputdict['ipaddress_in'])+"\n")
                    f.write("port_out = "+str(inputdict['port_in'])+"\n")
                    f.write("dbname_out = "+str(inputdict['dbname_in'])+"\n")
                    f.write("setupsheet_out = "+str(inputdict['setupsheet_in'])+"\n")
                    f.write("material_out = "+str(inputdict['material_in'])+"\n")
                    f.write("status_out = Execution Successful.\n" )
                    f.write("machine_capability_out = "+status_new[0][4]+"\n" )
                    f.write("machine_availability_out = "+avail+"\n")
                    f.write("feedback_out = "+feed)
    
    
except:
    connection_status="Not Connected"
    #report error if any while connecting to the databases
    with open('output.out', 'w') as f:
        f.write("""outputTemplate = <!DOCTYPE html> <html>   <head>     <title>Home</title>     <link href="https://s3.amazonaws.com/dmdiidome3/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/axure_rp_page.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/stylesd.css" type="text/css" rel="stylesheet"/>     <link href="https://s3.amazonaws.com/dmdiidome3/styles.css" type="text/css" rel="stylesheet"/>   </head>   <body>     <div id="base" class="">        <!-- Unnamed (Image) -->       <div id="u0" class="ax_default image">         <img id="u0_img" class="img " src="https://s3.amazonaws.com/dmdiidome3/u0.jpg"/>         <!-- Unnamed () -->         <div id="u1" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u2" class="ax_default box_1">         <div id="u2_div" class=""></div>         <!-- Unnamed () -->         <div id="u3" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u4" class="ax_default heading_3">         <div id="u4_div" class=""></div>         <!-- Unnamed () -->         <div id="u5" class="text">           <p><span>DIME Laboratory: Part-Machine Specifications Verification</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u6" class="ax_default box_2">         <div id="u6_div" class=""></div>         <!-- Unnamed () -->         <div id="u7" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u8" class="ax_default text_field">         <input id="ipaddress_out" type="text" placeholder="{{ipaddress_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u9" class="ax_default label">         <div id="u9_div" class=""></div>         <!-- Unnamed () -->         <div id="u10" class="text">           <p><span>IP Address</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u11" class="ax_default label">         <div id="u11_div" class=""></div>         <!-- Unnamed () -->         <div id="u12" class="text">           <p><span>Port</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u13" class="ax_default label">         <div id="u13_div" class=""></div>         <!-- Unnamed () -->         <div id="u14" class="text">           <p><span>Database Name</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u15" class="ax_default text_field">         <input id="port_out" type="text" placeholder="{{port_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u16" class="ax_default text_field">         <input id="dbname_out" type="text" placeholder="{{dbname_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u17" class="ax_default box_2">         <div id="u17_div" class=""></div>         <!-- Unnamed () -->         <div id="u18" class="text" style="display:none; visibility: hidden">           <p><span></span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u19" class="ax_default label">         <div id="u19_div" class=""></div>         <!-- Unnamed () -->         <div id="u20" class="text">           <p><span>Setup Sheet</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u21" class="ax_default label">         <div id="u21_div" class=""></div>         <!-- Unnamed () -->         <div id="u22" class="text">           <p><span>Material</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u23" class="ax_default text_field">         <input id="material_out" type="text" placeholder="{{material_out}}"/>       </div>        <!-- Unnamed (Text Field) -->       <div id="u24" class="ax_default text_field">         <input id="setupsheet_out" type="text" placeholder="{{setupsheet_out}}"/>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u25" class="ax_default label">         <div id="u25_div" class=""></div>         <!-- Unnamed () -->         <div id="u26" class="text">           <p><span>Status</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u27" class="ax_default label">         <div id="u27_div" class=""></div>         <!-- Unnamed () -->         <div id="u28" class="text">           <p><span>Machine Capability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u29" class="ax_default label">         <div id="u29_div" class=""></div>         <!-- Unnamed () -->         <div id="u30" class="text">           <p><span>Machine Availability</span></p>         </div>       </div>        <!-- Unnamed (Rectangle) -->       <div id="u31" class="ax_default label">         <div id="u31_div" class=""></div>         <!-- Unnamed () -->         <div id="u32" class="text">           <p><span>Feedback</span></p>         </div>       </div>        <!-- Unnamed (Text Field) -->       <div id="u33" class="ax_default text_field">         <input id="status_out" type="text" placeholder="{{status_out}}"/>       </div>        <!-- Unnamed (Text Area) -->       <div id="u34" class="ax_default text_area">         <textarea id="machine_capability_out" type="text" placeholder="{{machine_capability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u35" class="ax_default text_area">         <textarea id="machine_availability_out" type="text" placeholder="{{machine_availability_out}}"></textarea>       </div>        <!-- Unnamed (Text Area) -->       <div id="u36" class="ax_default text_area">         <textarea id="feedback_out" type="text" placeholder="{{feedback_out}}"></textarea>       </div>     </div>   </body> </html>""")
        f.write("\n")
        f.write("ipaddress_out = "+str(inputdict['ipaddress_in'])+"\n")
        f.write("port_out = "+str(inputdict['port_in'])+"\n")
        f.write("dbname_out = "+str(inputdict['dbname_in'])+"\n")
        f.write("setupsheet_out = "+str(inputdict['setupsheet_in'])+"\n")
        f.write("material_out = "+str(inputdict['material_in'])+"\n")
        f.write("status_out = Error\n" )
        f.write("machine_capability_out = NA\n" )
        f.write("machine_availability_out = NA\n")
        f.write("feedback_out = Error connecting to the AWS-RDS and/or RHEL system. Kindly check if the server is running on the specified hosts.")
        
    

